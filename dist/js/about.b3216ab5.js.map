{"version":3,"sources":["webpack:///./src/views/about/News.vue?10ec","webpack:///src/views/about/News.vue","webpack:///./src/views/about/News.vue?859e","webpack:///./src/views/about/News.vue","webpack:///./src/views/about/News.vue?d287"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","post","staticStyle","border","attrs","to","name","params","id","tag","_v","_s","staticRenderFns","Newsvue_type_script_lang_js_","data","isFinished","row","rowperpage","buttonText","posts","methods","getPosts","news","axios_default","a","then","response","len","length","setTimeout","i","push","isVisible","elem","coords","getBoundingClientRect","windowHeight","document","documentElement","clientHeight","extendedBottom","bottomVisible","bottom","showVisible","elements","getElementsByClassName","secondToLastElement","created","window","onscroll","about_Newsvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_News_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_News_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"uIAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,QAAmB,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAN,EAAAO,GAAAP,EAAA,eAAAQ,GAAoC,OAAAJ,EAAA,eAAyBE,YAAA,iBAAAG,YAAA,CAA0CC,OAAA,iBAAyBC,MAAA,CAAQC,GAAA,CAAMC,KAAA,WAAAC,OAAA,CAA2BC,GAAAP,EAAAO,KAAeC,IAAA,MAAY,CAAAZ,EAAA,SAAa,CAAAJ,EAAAiB,GAAAjB,EAAAkB,GAAAV,EAAAO,WAA8BX,EAAA,aAChZe,EAAA,kECwBAC,EAAA,CACAC,KADA,WAEA,OACAC,YAAA,EACAC,IAAA,EACAC,WAAA,GACAC,WAAA,2BACAC,MAAA,KAGAC,QAAA,CACAC,SADA,WAEA,IAAAC,EAAA5B,KACA6B,EAAAC,EAAAvB,KAAA,iBACAe,IAAAtB,KAAAsB,IACAC,WAAAvB,KAAAuB,aAEAQ,KAAA,SAAAC,GAEA,QAAAA,EAAAZ,KAAA,CAGAQ,EAAAN,KAAAM,EAAAL,WAEA,IAAAU,EAAAL,EAAAH,MAAAS,OACAD,EAAA,GACAL,EAAAJ,WAAA,eACAW,WAAA,WACAP,EAAAJ,WAAA,2BAGA,QAAAY,EAAA,EAAAA,EAAAJ,EAAAZ,KAAAc,OAAAE,IACAR,EAAAH,MAAAY,KAAAL,EAAAZ,KAAAgB,KAEA,MAEAR,EAAAH,MAAAO,EAAAZ,UAIAQ,EAAAJ,WAAA,sBACAI,EAAAP,YAAA,KAIAiB,UAnCA,SAmCAC,GACA,IAAAC,EAAAD,EAAAE,wBACAC,EAAAC,SAAAC,gBAAAC,aACAC,EAAA,EAAAJ,EACAK,EAAAP,EAAAQ,OAAAF,EACA,OAAAC,GAEAE,YA1CA,WA2CA,IAAAC,EAAAP,SAAAQ,uBAAA,aACAC,EAAAF,IAAAhB,OAAA,GACAlC,KAAAsC,UAAAc,IACApD,KAAA2B,aAIA0B,QA5DA,WA6DAC,OAAAC,SAAAvD,KAAAiD,YACAjD,KAAA2B,aCvF6V6B,EAAA,0BCQ7VC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACA1D,EACAoB,GACF,EACA,KACA,KACA,MAIe0C,EAAA,WAAAH,6CCnBf,IAAAI,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA6hBE,EAAG","file":"js/about.b3216ab5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"news\"},[_c('div',{staticClass:\"container\"},[_vm._l((_vm.posts),function(post){return _c('router-link',{staticClass:\"news-item mb-3\",staticStyle:{\"border\":\"1px solid red\"},attrs:{\"to\":{name: 'newsItem', params: { id: post.id }},\"tag\":\"a\"}},[_c('div',{},[_vm._v(_vm._s(post.id))])])}),_c('br')],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"news\">\n        <div class=\"container\">\n            <router-link \n                :to=\"{name: 'newsItem', params: { id: post.id }}\"\n                tag=\"a\"\n                class=\"news-item mb-3\"\n                v-for=\"post in posts\" \n                style=\"border: 1px solid red\">\n                <div v-cloak>{{ post.id }}</div>\n            </router-link>\n            <br>\n            <!-- <button \n                class=\"publications__btn btn btn_more\" \n                :class=\"[isFinished ? 'finish' : 'load-more']\" \n                @click=\"getPosts()\">\n                {{ buttonText }}\n            </button> -->\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n\n    export default {\n        data() {\n            return {\n                isFinished: false,\n                row: 0, // Record selction position\n                rowperpage: 10, // Number of records fetch at a time\n                buttonText: 'Все услуги и направления',\n                posts: ''\n            }\n        },\n        methods: {\n            getPosts() {\n                var news = this;\n                axios.post('/ajaxfile.php', {\n                    row: this.row, \n                    rowperpage: this.rowperpage\n                })\n                .then(function (response) {\n                    \n                    if(response.data !== '' ) {\n\n                       // Update rowperpage\n                       news.row += news.rowperpage;\n\n                        var len = news.posts.length;\n                        if (len > 0) {\n                            news.buttonText = \"Загрузка ...\";\n                            setTimeout(function() {\n                                news.buttonText = \"Ещё услуги и направления\";\n\n                                // Loop on data and push in posts\n                                for (let i = 0; i < response.data.length; i++){\n                                    news.posts.push(response.data[i]); \n                                }\n                            }, 500);\n                        } else {\n                            news.posts = response.data;\n                        }\n\n                    } else {\n                        news.buttonText = \"Записей больше нет.\";\n                        news.isFinished = true;\n                    }\n                });\n            },\n            isVisible(elem) {\n                var coords = elem.getBoundingClientRect();\n                var windowHeight = document.documentElement.clientHeight;\n                var extendedBottom = 2 * windowHeight;\n                var bottomVisible = coords.bottom < extendedBottom;\n                return bottomVisible;\n            },\n            showVisible() {\n                var elements = document.getElementsByClassName('news-item');\n                var secondToLastElement = elements[elements.length - 1];\n                if (this.isVisible(secondToLastElement)) {\n                    this.getPosts()\n                }\n            }\n        },\n        created() {\n            window.onscroll = this.showVisible;\n            this.getPosts();\n        }\n    }\n</script>\n\n<style lang=\"sass\">\n    .news__btn\n        display: block\n        width: 300px\n        height: 40px\n        margin: 0 auto\n        border: 5px solid lightblue\n\n    .news-item\n        display: block\n        width: 100%\n        height: 200px\n\n    .finish\n        display: none\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./News.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./News.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./News.vue?vue&type=template&id=23cbfa6a&\"\nimport script from \"./News.vue?vue&type=script&lang=js&\"\nexport * from \"./News.vue?vue&type=script&lang=js&\"\nimport style0 from \"./News.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./News.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./News.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}